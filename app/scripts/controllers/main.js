// Generated by CoffeeScript 1.6.3
'use strict';
angular.module('resourceFoundryApp').controller('MainCtrl', function($scope, Resources, mediaTypes, topics, levels, costs, paths, map) {
  $scope.mediaTypes = mediaTypes;
  $scope.topics = topics;
  $scope.levels = levels;
  $scope.costs = costs;
  $scope.paths = paths;
  $scope.valueFor = map;
  Resources.get().then(function(resources) {
    $scope.resources = resources;
    return $scope.authors = _.uniq(_.flatten(_.pluck(resources, "authors")), JSON.stringify);
  });
  return $scope.addResource = function() {
    Resources.add(_.defaults(angular.copy($scope.input), {
      topic: [],
      mediaType: [],
      description: "",
      authors: [
        {
          name: ""
        }
      ],
      cost: "free"
    }));
    return $scope.input = {};
  };
});
