// Generated by CoffeeScript 1.6.3
'use strict';
angular.module('resourceFoundryApp').controller('MainCtrl', function($scope, $http, keygen) {
  $http({
    method: 'GET',
    url: '/data.json'
  }).success(function(data, status, config) {
    $scope.authors = _.uniq(_.flatten(_.pluck(data, "authors")), JSON.stringify);
    return $scope.topics = _.map(_.uniq(_.flatten(_.pluck(data, "topic"))), function(el) {
      return {
        key: el,
        value: el
      };
    });
  }).error(function() {
    return console.log('error :(');
  });
  $scope.paths = [
    {
      key: "webdevelopment",
      value: "Web Development"
    }, {
      key: "marketing",
      value: "Marketing"
    }
  ];
  $scope.levels = [
    {
      key: "beginner",
      value: "Beginner"
    }, {
      key: "intermediate",
      value: "Intermediate"
    }, {
      key: "expert",
      value: "Expert"
    }, {
      key: "all",
      value: "All"
    }
  ];
  $scope.topics = [
    {
      key: "html",
      value: "HTML"
    }, {
      key: "css",
      value: "CSS"
    }, {
      key: "javascript",
      value: "JavaScript"
    }, {
      key: "frontend",
      value: "Front End"
    }
  ];
  $scope.mediaTypes = [
    {
      key: "article",
      value: "Article"
    }, {
      key: "reference",
      value: "Reference"
    }, {
      key: "tutorial",
      value: "Tutorial"
    }, {
      key: "tool",
      value: "Tool"
    }, {
      key: "talk",
      value: "Talk"
    }, {
      key: "video",
      value: "Video"
    }
  ];
  $scope.resources = [
    {
      path: "webdevelopment",
      title: "Google",
      link: "http://www.apple.com",
      level: "all",
      topics: [
        {
          key: "html",
          value: "HTML"
        }, {
          key: "css",
          value: "CSS"
        }, {
          key: "javascript",
          value: "JavaScript"
        }
      ],
      mediaTypes: ["reference", "tutorial", "tool"]
    }
  ];
  return $scope.addResource = function() {
    $scope.resources.push({
      path: $scope.input.path,
      title: $scope.input.title,
      link: $scope.input.url,
      level: $scope.input.level,
      topics: _.pluck($scope.input.topics, "id"),
      mediaTypes: _.pluck($scope.input.types, "id"),
      description: $scope.input.description
    });
    return $scope.input = {};
  };
});
