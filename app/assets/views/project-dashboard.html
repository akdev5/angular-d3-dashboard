<div class="row project">
  <header>
    <h1>{{project.title}}</h1>
    <h5 ng-show="project.description !== ''">{{project.desciption}}</h5>
  </header>
  <nav sticky class="navbar-inverse navbar-static-top" role="navigation">
    <img class="logo" src="/images/logo-light-nav.png" height="35"/>
    <ul class="nav navbar-nav">
      <li spy="tasks" spy-class="active" ng-click="selected='tasks'"><a><span class="glyphicon glyphicon-unchecked"></span> Tasks</a></li>
      <li spy="decisions" spy-class="active" ng-click="selected='decisions';open()"><a><span class="glyphicon glyphicon-unchecked"></span> Decisions</a></li>
    </ul>
  </nav>
  <div class="container" scroll-spy>
    <div class="row">
      <div class="col-lg-3">
        <div class="well sidebar">
          <ul class="nav">
            <li ng-repeat='module in project.modules'>{{module.title}}</li>
          </ul>
        </div>
      </div>
      <div class="col-lg-9 content" ng-switch on="selected">
        <!-- <div class="jumbotron col-lg-12" ng-switch="active.hidden" droppable>
          <div id="active" ng-switch-when="false">
            <h1>{{active.task.title}}</h1>
            <h2>{{active.task.subtitle}}</h2>
            <p class="lead">{{active.task.name}}</p>
          </div>
          <div id="drop-zone" ng-switch-when="true">
            <h2>Drop Here to Set Active Task</h2>
          </div>
        </div> -->
        <div ng-switch-when="tasks">
          <div class="jumbotron tasks">
            <!-- <div class="row">
              <input id="filterTasks" type="text" placeholder="What do you need to do?" ng-model="filterTasks">
              <div class="btn-group">
                <button class="btn btn-default btn-lg dropdown-toggle" type="button" data-toggle="dropdown">
                  {{currentModuleTitle}} <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                  <li ng-click="setCurrentModuleIndex($index)" ng-repeat="module in project.modules">{{module.title}}</li>
                </ul>
              </div>
            </div> -->
            <!-- <div class="row active">
              <div class="col-lg-12" ng-switch="active.hidden" droppable>
                <div id="active" class="well" ng-switch-when="false">
                  <h1>{{active.task.title}}</h1>
                  <h2>{{active.task.subtitle}}</h2>
                </div>
                <div id="drop-zone" class="well" ng-switch-when="true">
                  <h2>Drop Here to Set Active Task</h2>
                </div>
              </div>
            </div> -->
            <div ng-repeat='module in project.modules'>
              <h1>{{module.title}}</h1>
              <multi-repeat collection="module.tasks" columns="2" dragging="dragging(dragged, index)">
                <a href="/task/{{item.name}}">
                  <div class="well">
                      <h2>{{item.title}}</h2>
                      <h4>{{item.subtitle}}</h4>
                  </div>
                </a>
              </multi-repeat>
            </div>
          </div>
        </div>
        </ng-switch>
        <div ng-switch-when="decisions">
          <decision-flow></decision-flow>
        </ng-switch>
      </div>
      <!-- <div class="col-lg-1"></div> -->
    </div>
  </div>
</div>

<div class="modal container fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Modal title</h4>
      </div>
      <div class="modal-body">
        <decision-flow></decision-flow>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
